import gmplot
import pandas as pd
import sqlite3



def plotheatmap():
	#retrieving Lat and long values from the database
	con = sqlite3.connect('projectMal.db')
	cur = con.cursor()
	query = 'SELECT "latitude","longitude","city" FROM "Locationdata" where latitude!=""'
	res = pd.read_sql(query,con)
	latitudes = res["latitude"]
	longitudes = res["longitude"]
	city = res["city"]
	#initializing the focus point of the map and appending the API key
	gmap = gmplot.GoogleMapPlotter(0.0522, 0.2437,3,'AIzaSyAwZ9fVUmAd6KaquhStiFQltzWB4SkmtPs')
	for i in range(0,30):
		#plotting the values in the map
		gmap.heatmap(latitudes,longitudes,30,10,None,0.6,5)
	gmap.draw("map.html")
	
